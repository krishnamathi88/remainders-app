<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reminders App (Smartwatch Simulation with Past Reminders)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            background: linear-gradient(to right, #8e44ad, #6a1b9a);
            padding: 20px;
            color: white;
        }
        .app-content {
            display: block;
        }
        #smartwatchView {
            display: none;
        }
        input, button {
            margin-top: 10px;
            padding: 14px;
            font-size: 16px;
            border-radius: 12px;
            border: 1px solid #ddd;
            width: 85%;
            max-width: 400px;
            outline: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        button {
            background: linear-gradient(to right, #ab47bc, #8e44ad);
            color: white;
            border: none;
            cursor: pointer;
        }
        .reminder-list {
            margin-top: 30px;
            text-align: center;
            background: #ffffff33;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
        }
        .reminder-item {
            margin-bottom: 10px;
            padding: 12px;
            background: #ffffff44;
            border-radius: 10px;
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body>

    <div class="app-content">
        <h2>‚ú® Set Your Reminder</h2>
        <input type="text" id="reminderText" placeholder="Enter Reminder Text">
        <input type="text" id="reminderTime" placeholder="Pick Date & Time">
        <button onclick="setReminder()">Set Reminder</button>

        <div class="reminder-list">
            <h3>üìã Scheduled Reminders</h3>
            <div id="listContainer"></div>
        </div>
        <div class="reminder-list">
            <h3>‚è± Past Reminders</h3>
            <div id="pastContainer"></div>
        </div>
    </div>

    <div id="smartwatchView">
        <div class="watch-container">
            <div style="font-size:40px;">üîî</div>
            <div style="font-weight:bold; margin: 10px 0;" id="smartwatchText">No reminders yet</div>
            <button onclick="markDone()" style="background:#ab47bc; color:white; padding:10px 20px; border:none; border-radius:20px;">‚úî Mark as done</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            flatpickr("#reminderTime", { enableTime: true, dateFormat: "Y-m-d H:i" });
            refreshReminderList();
            refreshPastList();
            autoTriggerSavedReminders();
        });

        function setReminder() {
            const message = document.getElementById('reminderText').value;
            const timeInput = document.getElementById('reminderTime').value;
            if (!message || !timeInput) {
                alert("Please enter text and select time");
                return;
            }

            const reminderData = { message: message, time: timeInput };
            saveReminder(reminderData);
            scheduleReminder(reminderData);

            alert(`Reminder Set for: ${timeInput}\\nMessage: ${message}`);
            refreshReminderList();
        }

        function saveReminder(reminder) {
            let reminders = JSON.parse(localStorage.getItem("reminders")) || [];
            reminders.push(reminder);
            localStorage.setItem("reminders", JSON.stringify(reminders));
        }

        function refreshReminderList() {
            const container = document.getElementById("listContainer");
            container.innerHTML = "";
            let reminders = JSON.parse(localStorage.getItem("reminders")) || [];
            reminders.forEach(r => {
                const div = document.createElement("div");
                div.className = "reminder-item";
                div.innerText = `üìÖ ${r.time}\\nüîî ${r.message}`;
                container.appendChild(div);
            });
        }

        function refreshPastList() {
            const container = document.getElementById("pastContainer");
            container.innerHTML = "";
            let pastReminders = JSON.parse(localStorage.getItem("pastReminders")) || [];
            pastReminders.forEach(r => {
                const div = document.createElement("div");
                div.className = "reminder-item";
                div.innerText = `üìÖ ${r.time}\\nüîî ${r.message}`;
                container.appendChild(div);
            });
        }

        function scheduleReminder(reminder) {
            const reminderTime = new Date(reminder.time);
            const now = new Date();
            const delay = reminderTime - now;

            if (delay > 0) {
                setTimeout(() => {
                    triggerReminder(reminder.message);
                    moveToPast(reminder);
                    refreshReminderList();
                    refreshPastList();
                }, delay);
            }
        }

        function triggerReminder(message) {
            speechSynthesis.speak(new SpeechSynthesisUtterance(`Reminder now: ${message}`));
            document.getElementById("smartwatchText").innerText = message;
            document.getElementById("smartwatchView").style.display = 'flex';
        }

        function markDone() {
            alert("Marked as done");
            document.getElementById("smartwatchView").style.display = 'none';
        }

        function moveToPast(reminder) {
            removeReminder(reminder);
            let pastReminders = JSON.parse(localStorage.getItem("pastReminders")) || [];
            pastReminders.push(reminder);
            localStorage.setItem("pastReminders", JSON.stringify(pastReminders));
        }

        function removeReminder(reminderToRemove) {
            let reminders = JSON.parse(localStorage.getItem("reminders")) || [];
            reminders = reminders.filter(r => !(r.message === reminderToRemove.message && r.time === reminderToRemove.time));
            localStorage.setItem("reminders", JSON.stringify(reminders));
        }

        function autoTriggerSavedReminders() {
            let reminders = JSON.parse(localStorage.getItem("reminders")) || [];
            reminders.forEach(r => {
                scheduleReminder(r);
            });
        }
    </script>

</body>
</html>
